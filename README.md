# Cloud-Local n8n & Flowise Setup

Автоматизированный скрипт установки n8n и Flowise с reverse прокси-сервером Caddy для безопасного доступа через HTTPS.

## Описание

Этот репозиторий содержит скрипты для автоматической настройки:

- **n8n** - мощная платформа автоматизации рабочих процессов с открытым исходным кодом
- **Flowise** - инструмент для создания настраиваемых AI-потоков
- **Caddy** - современный веб-сервер с автоматическим HTTPS

Система настраивается для работы с вашим доменным именем и автоматически получает SSL-сертификаты Let's Encrypt.

## Требования

- Ubuntu 22.04 
- Доменное имя, направленное на IP-адрес вашего сервера
- Доступ к серверу с правами администратора (sudo)
- Открытые порты 80, 443 

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/miolamio/cloud-local-n8n-flowise.git
   cd cloud-local-n8n-flowise
   ```

2. Сделайте скрипт исполняемым:
   ```bash
   chmod +x setup.sh
   ```

3. Запустите скрипт установки:
   ```bash
   ./setup.sh
   ```

4. Следуйте инструкциям в терминале:
   - Введите ваше доменное имя (например, example.com)
   - Введите ваш email (будет использоваться для входа в n8n и для Let's Encrypt)

## Что делает скрипт установки

1. **Обновление системы** - обновляет список пакетов и устанавливает необходимые зависимости
2. **Установка Docker** - устанавливает Docker Engine и Docker Compose
3. **Настройка директорий** - создает пользователя n8n и необходимые директории
4. **Генерация секретов** - создает случайные пароли и ключи шифрования
5. **Создание конфигурационных файлов** - генерирует файлы docker-compose и Caddyfile
6. **Настройка брандмауэра** - открывает необходимые порты
7. **Запуск сервисов** - запускает контейнеры Docker

## Доступ к сервисам

После завершения установки вы получите доступ к сервисам по следующим URL:

- **n8n**: https://n8n.ваш-домен.xxx
- **Flowise**: https://flowise.ваш-домен.xxx

Учетные данные для входа будут отображены в конце процесса установки.

## Структура проекта

- `setup.sh` - основной скрипт установки
- `setup-files/` - директория с вспомогательными скриптами:
  - `01-update-system.sh` - обновление системы
  - `02-install-docker.sh` - установка Docker
  - `03-setup-directories.sh` - настройка директорий и пользователей
  - `04-generate-secrets.sh` - генерация секретных ключей
  - `05-create-templates.sh` - создание конфигурационных файлов
  - `06-setup-firewall.sh` - настройка брандмауэра
  - `07-start-services.sh` - запуск сервисов
- `n8n-docker-compose.yaml.template` - шаблон docker-compose для n8n и Caddy
- `flowise-docker-compose.yaml.template` - шаблон docker-compose для Flowise

## Управление сервисами

### Перезапуск сервисов

```bash
docker compose -f n8n-docker-compose.yaml restart
docker compose -f flowise-docker-compose.yaml restart
```

### Остановка сервисов

```bash
docker compose -f n8n-docker-compose.yaml down
docker compose -f flowise-docker-compose.yaml down
```

### Просмотр логов

```bash
docker compose -f n8n-docker-compose.yaml logs
docker compose -f flowise-docker-compose.yaml logs
```

## Безопасность

- Все сервисы доступны только через HTTPS с автоматически обновляемыми сертификатами Let's Encrypt
- Создаются случайные пароли для n8n и Flowise
- Пользователи создаются с минимально необходимыми привилегиями

## Устранение неполадок

- Проверьте DNS-записи вашего домена, убедитесь что они указывают на правильный IP-адрес
- Проверьте, что порты 80 и 443 открыты на вашем сервере
- Просмотрите логи контейнеров для обнаружения ошибок

## Лицензия

Этот проект распространяется под лицензией MIT. 

## Автор

@codegeek